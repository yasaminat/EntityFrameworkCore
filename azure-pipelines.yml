#
# See https://docs.microsoft.com/en-us/vsts/pipelines/yaml-schema for details
#

# Only run CI builds for these branches
trigger:
  - master
  - release/*
  - internal/release/*
# Run PR validation on all branches
pr:
  - '*'

jobs:
- template: eng/common/templates/jobs/jobs.yml
  parameters:
    jobs:
      - job: Windows
        pool: dotnet-external-temp
        steps:
        - script: eng\common\cibuild.cmd
            -prepareMachine

      - job: macOS
        pool:
          name: Hosted macOS
          vmImage: macOS-10.13
        steps:
          - script: eng/common/cibuild.sh
              --prepareMachine

      - job: Linux
        pool:
          name: Hosted Ubuntu 1604
          vmImage: ubuntu-16.04
        steps:
          - script: eng/common/cibuild.sh
              --prepareMachine
